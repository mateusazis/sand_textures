<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <script src="jquery.min.js"></script>
  <script src="jquery-mousedrag.js"></script>
  <script src="shader.js"></script>
  <script src="material.js"></script>
  <script src="coffee-script.js"></script>
  <script src="texture.js"></script>
  <script src="fbo.js"></script>
  <!--  <script src="main.js.coffee" type="text/coffeescript"></script> -->
</head>
<body>
  <script src="libs.js"></script>
  <script src="main2.js"></script>

<script type="vshader">
    attribute vec3 position;
    attribute vec2 uv;
    varying vec2 vUV;

    void main(void) { //pre-built function
        gl_Position = vec4(position, 1.0);
        vUV=uv;
    }
</script>

<script type="fshader" id="fbasic">
    precision mediump float;
    uniform sampler2D sampler;
    varying vec2 vUV;

    bool empty(vec4 color){
        return color.rgb == vec3(.0);
    }

    void main(void) {
        vec4 color = texture2D(sampler, vUV);
        vec2 uvBelow = vUV - vec2(0, 1.0/400.0);
        vec2 uvAbove = vUV + vec2(0, 1.0/400.0);
        vec4 colorBelow = texture2D(sampler, uvBelow);
        vec4 colorAbove = texture2D(sampler, uvAbove);
        if(empty(color))
            color = colorAbove;
        else if(empty(colorBelow))
            color.rgb = vec3(.0);
            // color.r = 1.0;
            // color.a = .0;

        // color = colorAbove;
        gl_FragColor = color;
    }
</script>

<script type="fshader" id="f2">
    precision mediump float;
    uniform sampler2D sampler;
    varying vec2 vUV;

    void main(void) {
        vec2 uv = vUV;
        // uv.y = 1.0 - uv.y;
        vec4 color = texture2D(sampler, uv);
        gl_FragColor = color;
    }
</script>

<script type="vshader" id="vpoint">
    attribute vec4 position;
    uniform vec2 mouse;

    void main(void) {
        gl_Position = position;

        gl_PointSize = 20.;
        vec2 mouseScreen = (mouse - vec2(200.0, 200.0)) / 200.0;
        mouseScreen.y = - mouseScreen.y;
        gl_Position = vec4(mouseScreen, 0.0, 1.0);
    }
</script>

<script type="fshader" id="fpoint">
    precision mediump float;

    void main(void) {
        vec2 coord = gl_PointCoord;
        coord.x = mix(-1.0, 1.0, coord.x);
        coord.y = mix(-1.0, 1.0, coord.y);
        float inside = float(length(coord) <= 1.);
        gl_FragColor = vec4(.0, 0., .0, 1.0);
    }
</script>

<canvas width=400 height=400></canvas>
<!-- <img src="p.png" style=""/> -->
</body>
</html>
